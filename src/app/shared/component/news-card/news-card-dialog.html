<h1 matDialogTitle class="text-blue">Chi tiết bản tin đang phát </h1>

<mat-divider></mat-divider>
<div mat-dialog-content>
  <audio controls class="full-width">
    <source src="{{data.data[0].url}}" type="audio/wav">
  </audio>

  <div fxLayout="column" fxLayoutGap="10" class="mt-3">
    <div fxLayout="row" fxLayoutGap="5">
      <div class="text-blue fw-500" fxFlex="20">Tên phát thanh:</div>
      <div class="text-gray">{{data.data[0].title}}</div>
    </div>

    <div fxLayout="row" fxLayoutGap="5">
      <div class="text-blue fw-500" fxFlex="20">Thời gian phát:</div>
      <div class="text-gray">{{data.data[0].date| date:'dd-MM-yyyy'}} {{data.data[0].starttime}}
        - {{data.data[0].endtime}}</div>
    </div>

    <div fxLayout="row" fxLayoutGap="5">
      <div class="text-blue fw-500" fxFlex="20">Loại bản tin:</div>
      <div class="text-gray">{{data.data[0].field}}</div>
    </div>

    <div fxLayout="row" fxLayoutGap="5"
          *ngIf="data.data[0].content !== ''">
      <div class="text-blue fw-500" fxFlex="20">Nội dung phát:</div>
      <div style="width: 450px" class="text-gray">
        <app-see-more [content]="data.data[0].content"></app-see-more>
      </div>
    </div>

    <div fxLayout="column" fxLayoutGap="5">
      <div class="text-blue fw-500" fxFlex="20">Khu vực phát:</div>
      <div *ngFor="let item of data.area">
        <div fxLayout="row" (click)="item.display = !item.display"
             *ngIf="item.wards.length > 0"
             class="cursor mt-1">

          <mat-icon *ngIf="data.area.length > 1">{{(item.display && data.area.length >1)? 'expand_more' : 'chevron_right'}}</mat-icon>
          <mat-icon *ngIf="data.area.length === 1">expand_more</mat-icon>

          <p class="fw-500">{{ item.district }}</p>
        </div>

        <div *ngIf="data.area.length === 1 then displayData; else hiddenData"> </div>

        <ng-template #displayData>
          <ul class="ms-3 mt--1">
            <li *ngFor="let ward of item.wards; let i = index">
              {{ward}}
            </li>
          </ul>
        </ng-template>

        <ng-template #hiddenData>
          <div [class.hiddenItem]="!item.display">
            <ul class="ms-3 mt--1">
              <li *ngFor="let ward of item.wards; let i = index">
                {{ward}}
              </li>
            </ul>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<div mat-dialog-actions align="end">
  <button mat-button color="warn" type="button" (click)="dialogRef.close(false)">Đóng</button>
</div>
